# 设计原则

## 单一职责

概念：一个类或者模块只负责完成一个职责。

如何判断一个类是否符合单一职责？

这个评判标准可能会随着开发阶段的不同和业务复杂度的提升，而有不同的结果。大致上来说，如果一个类，有两个或两个以上不相干的功能，那么就认为它不符合单一职责。

### 实例
利用单一职责重构项目的两个例子：
1.重构有鱼股票StockBaseInfo数据Model
原StockBaseInfo包含以下信息：
- 股票基本信息
- 股票价格信息
- 股票其他信息，如盘前盘后，暗盘
- 甚至于耦合了一些UI数据

问题原因：
这个类的定位是一个股票的基类，但是确耦合了过多的其他内容，如价格/盘前后，还有一些不相关的其他内容

解决：利用单一职责重构
拆分为三个类：
- 股票基本信息类：包含: stockName, stockCode, marketCode，用于表示股票最基本的信息
- 价格基本信息类：包含：price, ct, changeValue，changeRatio等，用于表示股票基本的价格信息，可用于列表的展示，避免了以前StockBaseInfo 内容过重的情况
- 股票详细信息：stockDetail类，用于行情界面

2.用户资产类的重构
原因：
一个Model耦合了多币种, 风险等级、活动button配置、纯文本等内容，当每一项的内容都很复杂的时候，那么这个类的维护就是灾难了。

解决：
根据不同的业务场景，拆分为不同的类：
- 基本的key-value
- 多币种
- 风险等级

### 心得
1.如何判定一个类，**很好的遵循了单一职责，应该看它是否是：高内聚、低耦合**

关于高内聚和低耦合的理解：
高内聚：**相关的功能，应该在一个类里去维护**。比如文章中举例的，如果将序列化和反序列化拆分到两个类，那么如果序列化的规则改了，因为此时反序列化的方法不在同一个类中，那么很有可能会忘记修改，就会降低可维护性。另外，像系统的Codeable协议，encode和decode都是在一个类实现的

低耦合：**不相关的功能，应该拆分开来**。反例，就是上面举的两个例子。

2.另外要学会用发展的眼光看问题，现在觉得没有问题的设计，随着业务的扩展，可能会变得不适用。




## 开闭原则

概念：软件设计应该对**扩展开放，修改关闭**。就是说新增一个功能，应该是在已有的基础上扩展代码（添加类、模块、方法等），而非修改现在的代码

