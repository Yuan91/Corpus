# 设计模式学习



## 目的

1.对于每一个设计思想，原则，模式有一个清晰的认识，知道它适应于什么样的业务场景

2.要用swift 实现课程中的实战项目

3.思考如何将这个设计思想/原则/模式，应用在项目中，并要对已有的项目做重构

4.在以后写代码的时候，要多加思考是否可以使用这种设计模式，已有的代码是否违背某种设计原则/思想/模式



**囫囵吐枣的学完，不如细致的学会重点的部分**



## 重点掌握

### 面向对象
- [x] 封装
- [x] 继承
- [x] 多态
- [x] 抽象

### 设计原则
- [x] 单一职责
- [ ] 开闭原则
- [ ] 依赖倒置

### 设计模式

#### 创建型
- [x]  单例
- [x] 工厂
- [x] 建造者
#### 结构型
- [x] 代理
- [x] 装饰器
- [x] 适配器
#### 行为型
- [x] 观察者
- [x] 模板
- [x] 策略
- [x] 职责链
- [x] 迭代器





## 总结

### 设计模式的目的

设计模式解要干的事情就是**解耦**。

创建型模式解决的是对象创建的问题，将对象的创建和使用解耦；结构型模式解决的类和对象的组装问题，将不同的功能代码解耦；行为型模式解决的是类和对象之间的交互，将不同的行为解耦。

通过设计模式，**将一大坨代码拆分为职责单一的小类**，**让其满足开闭原则，高内聚低耦合，单一职责等特性**。以此达到提高代码可维护性的目的，当需要修改需求的时候，只修改一个单一职责的类或者干脆不用修改代码等，来减少代码维护、测试的成本，以及减少出错的可能性和影响范围。

应用设计模式主要是为了应对代码的复杂性，让其满足开闭原则，提高代码的扩展性

### 如何理解面向接口(协议)编程

以前的理解： 通过swift的特性，给协议添加默认实现，依次来代替继承。

现在的理解：

- 协议是一种行为或者能力的抽象，它规定了一些属性或方法，遵循协议的类必须实现协议要求。当遵循协议的对象被当做参数传递到调用方时，调用者并不关心协议对象是如何实现这些要求的，它只管调用即可
- 协议是面向对象语言实现多态的重要手段。一个协议类型，可以代表多个实现协议的【子类型】，使得他们能够作为同一种类型的参数进行传递。进而使得代码满足单一职责、开闭原则等要求，减少在需求变动的时候，代码修改/测试的成本
- 大量的设计模式，都是用了面向接口/协议变成的特点，让代码满足单一职责/开闭原则。

### 如何写出可扩展的代码？

意识层面：应该具备抽象意识、封装意识、扩展意识

具体到业务层面，在写代码之前最好花一段时间想一想哪些未来是会发生变化的，哪些是不会变化的。**对于变化(不稳定)的部分抽象成稳定的接口提供给外部，当需求发生变化的，只需要基于相同的抽象接口扩展出一个新的实现，替换掉老的实现即可，这样外部的代码基本不需要改动。**

### 如何区分工厂模式和建造者模式
工厂模式：用来创建不同但是相关类型的对象（继承同一父类），由给定的参数决定创建哪种类型的对象
建造者模式：用来创建同一种类型的复杂对象，通过设置不同的参数，定制化创建不同的对象



策略、模板、职责链三个模式常用在框架的设计中，提供框架的扩展点，让框架使用者，在不修改框架源码的情况下，基于扩展点定制化框架的功能。

