# 
1.查看 .o 文件
nm -m /Users/du/Desktop/hello.o  

2.链接过程主要包括了：

地址和空间的分配（Address and Storage Alloction）
符号决议（Symbol Resolution）Ps:"决议"更倾向于静态链接，而"绑定"更倾向于动态链接。
重定位（Relocation）

重定位的过程如下：
假设有个全局变量叫做var，它在目标文件A里面。我们在目标文件B里面要访问这个全局变量。由于在编译目标文件B的时候，编译器并不知道变量var的目标地址，所以编译器在没法确定的情况下，将目标地址设置为0，等待链接器在目标文件A和B连接起来的时候将其修正。这个地址修正的过程被叫做重定位，每个被修正的地方叫一个重定位入口。

3.bss段存储未初始化的全局变量和局部静态变量，他们的默认值都为0

4.为什么要把程序的指令和数据的存放分开？
最后一点也是最重要的一点，就是当系统中运行着多个改程序的副本时，它们的指令都是一样的，所有内存中只须要保存一份改程序的指令部分。对于指令这种只读的区域来说是这样的，对于其他的只读数据也是一样。当然每个副本进程的数据区域是不一样的，它们是进程私有的。

5.链接的接口--符号
链接的过程本质就是要把多个不同的目标文件之间相互"粘到一起"，或着说像一个玩具积木一样，可以拼装成一个整体。

**在链接中目标文件之间互相拼合实际上是目标文件之间对地址的引用，即对函数和变量地址的引用**。比如目标文件B要用到目标文件A中的函数“foo”，那么我们就称目标文件A**定义（Define）了函数“foo”，称目标文件B引用（Reference）**了目标文件A中的函数“foo”。这样的概念同样适用于变量。每个函数或变量都有自己独特的名字，才能避免链接过程中不同变量和函数之间的混淆。

**在链接中，我们将函数和变量统称为符号（Symbol），函数名或变量名就是符号名（Symbol Name）。**

我们经常在编程中碰到了一种情况叫符号重复定义。多个目标文件中含有相同名字全局符号的定义，那么这些**目标文件链接**的时候将会出现符号重复定义的错误。

6.链接分类
静态链接：所有的目标文件(.o文件)，都链接到一个可执行文件中。
装入时动态链接：多个动态库，会生成多个可执行文件。在执行的时候，作为一个进程一起装入内存。根据头文件找到引用的库进行装载
运行时动态链接：程序运行时，用的动态库才装载没有用到就不装载。

局部变量是指令，不是数据，没有符号。
链接器只处理全局的符号，只有全局变量和函数 有符号

编译过程不生成地址，链接才生成逻辑地址

函数调用(跳转)，存的是偏移量。PC寄存器的值+偏移量 = 调用函数的地址

程序就是指令和数据，这两个有两个LOAD项（这里的页指的内存分页的那个，一个4K），存在program header中，启动启动时，会加载这两个页。而.o文件中没有这两个页，所以不能执行

可执行程序在disk上还是按段存储的，加载到内存的时候，是按页加载的。目的：减少内存碎片，充分利用内存


esp:栈顶地址
ebp：栈底地址
